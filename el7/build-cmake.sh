#!/usr/bin/env bash
export PATH=$PATH:/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin
TZ='UTC'; export TZ
/sbin/ldconfig >/dev/null 2>&1

umask 022

CFLAGS='-O2 -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -fstack-protector-strong -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection'
export CFLAGS
CXXFLAGS='-O2 -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -fstack-protector-strong -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection'
export CXXFLAGS
LDFLAGS='-Wl,-z,relro -Wl,--as-needed -Wl,-z,now -specs=/usr/lib/rpm/redhat/redhat-hardened-ld'
export LDFLAGS

CC=gcc
export CC
CXX=g++
export CXX

CFLAGS="$CFLAGS -I/usr/local/openssl-1.1.1/include"
export CFLAGS
CXXFLAGS="$CXXFLAGS -I/usr/local/openssl-1.1.1/include"
export CXXFLAGS
LDFLAGS="$LDFLAGS -L/usr/local/openssl-1.1.1/lib"
export LDFLAGS
export LD_LIBRARY_PATH=/usr/local/openssl-1.1.1/lib:$LD_LIBRARY_PATH

_strip_and_zipman () {
    if [[ "$(pwd)" = '/' ]]; then
        echo
        printf '\e[01;31m%s\e[m\n' "Current dir is '/'"
        printf '\e[01;31m%s\e[m\n' "quit"
        echo
        exit 1
    else
        rm -fr lib64
        chown -R root:root ./
    fi
    find usr/ -type f -iname '*.la' -delete
    if [[ -d usr/share/man ]]; then
        find -L usr/share/man/ -type l -exec rm -f '{}' \;
        sleep 2
        find usr/share/man/ -type f -iname '*.[1-9]' -exec gzip -f -9 '{}' \;
        sleep 2
        find -L usr/share/man/ -type l | while read file; do ln -svf "$(readlink -s "${file}").gz" "${file}.gz" ; done
        sleep 2
        find -L usr/share/man/ -type l -exec rm -f '{}' \;
    fi
    if [[ -d usr/lib/x86_64-linux-gnu ]]; then
        find usr/lib/x86_64-linux-gnu/ -iname 'lib*.so*' -type f -exec file '{}' \; | sed -n -e 's/^\(.*\):[  ]*ELF.*, not stripped.*/\1/p' | xargs --no-run-if-empty -I '{}' /usr/bin/strip '{}'
        find usr/lib/x86_64-linux-gnu/ -iname '*.so' -type f -exec file '{}' \; | sed -n -e 's/^\(.*\):[  ]*ELF.*, not stripped.*/\1/p' | xargs --no-run-if-empty -I '{}' /usr/bin/strip '{}'
    fi
    if [[ -d usr/lib64 ]]; then
        find usr/lib64/ -iname 'lib*.so*' -type f -exec file '{}' \; | sed -n -e 's/^\(.*\):[  ]*ELF.*, not stripped.*/\1/p' | xargs --no-run-if-empty -I '{}' /usr/bin/strip '{}'
        find usr/lib64/ -iname '*.so' -type f -exec file '{}' \; | sed -n -e 's/^\(.*\):[  ]*ELF.*, not stripped.*/\1/p' | xargs --no-run-if-empty -I '{}' /usr/bin/strip '{}'
    fi
    if [[ -d usr/sbin ]]; then
        find usr/sbin/ -type f -exec file '{}' \; | sed -n -e 's/^\(.*\):[  ]*ELF.*, not stripped.*/\1/p' | xargs --no-run-if-empty -I '{}' /usr/bin/strip '{}'
    fi
    if [[ -d usr/bin ]]; then
        find usr/bin/ -type f -exec file '{}' \; | sed -n -e 's/^\(.*\):[  ]*ELF.*, not stripped.*/\1/p' | xargs --no-run-if-empty -I '{}' /usr/bin/strip '{}'
    fi
    if [[ -d usr/lib/gnupg2 ]]; then
        find usr/lib/gnupg2/ -type f -exec file '{}' \; | sed -n -e 's/^\(.*\):[  ]*ELF.*, not stripped.*/\1/p' | xargs --no-run-if-empty -I '{}' /usr/bin/strip '{}'
    fi
}

set -e

_tmp_dir="$(mktemp -d)"
cd "${_tmp_dir}"

#https://github.com/Kitware/CMake/releases/download/v3.23.1/cmake-3.23.1.tar.gz
_cmake_ver="$(wget -qO- 'https://github.com/Kitware/CMake/releases' | grep -i 'cmake-.*.tar\.' | sed 's|"|\n|g' | grep -i '^/Kitware/CMake/releases/download' | sed 's|.*/cmake-||g' | sed 's|\.tar.*||g' | grep -ivE 'alpha|beta|rc' | cut -d- -f1 | sort -V | uniq | tail -n 1)"
wget -c -t 9 -T 9 "https://github.com/Kitware/CMake/releases/download/v${_cmake_ver}/cmake-${_cmake_ver}.tar.gz"
sleep 1
tar -xf cmake-*.tar.*
sleep 1
rm -f cmake-*.tar*
cd cmake-*

./bootstrap --parallel=2 --prefix=/usr --datadir=share/cmake --docdir=share/doc/cmake \
--system-zlib --no-system-curl --no-qt-gui -- \
-G 'Unix Makefiles' \
-DCMAKE_BUILD_TYPE='Release' \
-DCMAKE_CXX_FLAGS:STRING='-static-libgcc -static-libstdc++ -lz -ldl -pthread' \
-DCMAKE_EXE_LINKER_FLAGS:STRING='-static-libgcc -static-libstdc++' \
-DCMAKE_USE_OPENSSL=ON \
-DOPENSSL_USE_STATIC_LIBS=ON \
-DOPENSSL_ROOT_DIR=/usr/local/openssl-1.1.1
sleep 1
make all
sleep 1
rm -fr /tmp/cmake
sleep 1
make install DESTDIR=/tmp/cmake
sleep 1
cd /tmp/cmake/
install -m 0755 -d usr/lib/rpm/fileattrs
install -m 0755 -d usr/lib/rpm/macros.d
rm -f usr/lib/rpm/cmake.req
rm -f usr/lib/rpm/cmake.prov
rm -f usr/lib/rpm/fileattrs/cmake.attr
rm -f usr/lib/rpm/macros.d/macros.cmake
rm -f usr/lib/rpm/macros.d/macros.vpath
sleep 1
printf '\x23\x21\x2F\x75\x73\x72\x2F\x62\x69\x6E\x2F\x70\x79\x74\x68\x6F\x6E\x0A\x23\x20\x2D\x2A\x2D\x20\x63\x6F\x64\x69\x6E\x67\x3A\x75\x74\x66\x2D\x38\x20\x2D\x2A\x2D\x0A\x23\x0A\x23\x20\x43\x6F\x70\x79\x72\x69\x67\x68\x74\x20\x28\x43\x29\x20\x32\x30\x31\x37\x20\x42\x6A\xC3\xB6\x72\x6E\x20\x45\x73\x73\x65\x72\x20\x3C\x62\x65\x73\x73\x65\x72\x38\x32\x40\x66\x65\x64\x6F\x72\x61\x70\x72\x6F\x6A\x65\x63\x74\x2E\x6F\x72\x67\x3E\x0A\x23\x0A\x23\x20\x62\x61\x73\x65\x64\x20\x6F\x6E\x20\x63\x6D\x61\x6B\x65\x2E\x70\x72\x6F\x76\x2C\x20\x77\x68\x69\x63\x68\x20\x69\x73\x0A\x23\x20\x43\x6F\x70\x79\x72\x69\x67\x68\x74\x20\x28\x43\x29\x20\x32\x30\x31\x35\x20\x44\x61\x6E\x69\x65\x6C\x20\x56\x72\xC3\xA1\x74\x69\x6C\x20\x3C\x64\x76\x72\x61\x74\x69\x6C\x40\x72\x65\x64\x68\x61\x74\x2E\x63\x6F\x6D\x3E\x0A\x23\x20\x43\x6F\x70\x79\x72\x69\x67\x68\x74\x20\x28\x43\x29\x20\x32\x30\x31\x37\x20\x44\x61\x6E\x69\x65\x6C\x20\x56\x72\xC3\xA1\x74\x69\x6C\x20\x3C\x64\x76\x72\x61\x74\x69\x6C\x40\x66\x65\x64\x6F\x72\x61\x70\x72\x6F\x6A\x65\x63\x74\x2E\x6F\x72\x67\x3E\x0A\x23\x0A\x23\x0A\x23\x20\x54\x68\x69\x73\x20\x70\x72\x6F\x67\x72\x61\x6D\x20\x69\x73\x20\x66\x72\x65\x65\x20\x73\x6F\x66\x74\x77\x61\x72\x65\x3B\x20\x79\x6F\x75\x20\x63\x61\x6E\x20\x72\x65\x64\x69\x73\x74\x72\x69\x62\x75\x74\x65\x20\x69\x74\x20\x61\x6E\x64\x2F\x6F\x72\x20\x6D\x6F\x64\x69\x66\x79\x0A\x23\x20\x69\x74\x20\x75\x6E\x64\x65\x72\x20\x74\x68\x65\x20\x74\x65\x72\x6D\x73\x20\x6F\x66\x20\x74\x68\x65\x20\x47\x4E\x55\x20\x4C\x69\x62\x72\x61\x72\x79\x20\x47\x65\x6E\x65\x72\x61\x6C\x20\x50\x75\x62\x6C\x69\x63\x20\x4C\x69\x63\x65\x6E\x73\x65\x20\x61\x73\x0A\x23\x20\x70\x75\x62\x6C\x69\x73\x68\x65\x64\x20\x62\x79\x20\x74\x68\x65\x20\x46\x72\x65\x65\x20\x53\x6F\x66\x74\x77\x61\x72\x65\x20\x46\x6F\x75\x6E\x64\x61\x74\x69\x6F\x6E\x3B\x20\x65\x69\x74\x68\x65\x72\x20\x76\x65\x72\x73\x69\x6F\x6E\x20\x32\x20\x6F\x66\x20\x74\x68\x65\x0A\x23\x20\x4C\x69\x63\x65\x6E\x73\x65\x2C\x20\x6F\x72\x20\x28\x61\x74\x20\x79\x6F\x75\x72\x20\x6F\x70\x74\x69\x6F\x6E\x29\x20\x61\x6E\x79\x20\x6C\x61\x74\x65\x72\x20\x76\x65\x72\x73\x69\x6F\x6E\x2E\x0A\x23\x0A\x23\x20\x54\x68\x69\x73\x20\x70\x72\x6F\x67\x72\x61\x6D\x20\x69\x73\x20\x64\x69\x73\x74\x72\x69\x62\x75\x74\x65\x64\x20\x69\x6E\x20\x74\x68\x65\x20\x68\x6F\x70\x65\x20\x74\x68\x61\x74\x20\x69\x74\x20\x77\x69\x6C\x6C\x20\x62\x65\x20\x75\x73\x65\x66\x75\x6C\x2C\x0A\x23\x20\x62\x75\x74\x20\x57\x49\x54\x48\x4F\x55\x54\x20\x41\x4E\x59\x20\x57\x41\x52\x52\x41\x4E\x54\x59\x3B\x20\x77\x69\x74\x68\x6F\x75\x74\x20\x65\x76\x65\x6E\x20\x74\x68\x65\x20\x69\x6D\x70\x6C\x69\x65\x64\x20\x77\x61\x72\x72\x61\x6E\x74\x79\x20\x6F\x66\x0A\x23\x20\x4D\x45\x52\x43\x48\x41\x4E\x54\x41\x42\x49\x4C\x49\x54\x59\x20\x6F\x72\x20\x46\x49\x54\x4E\x45\x53\x53\x20\x46\x4F\x52\x20\x41\x20\x50\x41\x52\x54\x49\x43\x55\x4C\x41\x52\x20\x50\x55\x52\x50\x4F\x53\x45\x2E\x20\x20\x53\x65\x65\x20\x74\x68\x65\x0A\x23\x20\x47\x4E\x55\x20\x47\x65\x6E\x65\x72\x61\x6C\x20\x50\x75\x62\x6C\x69\x63\x20\x4C\x69\x63\x65\x6E\x73\x65\x20\x66\x6F\x72\x20\x6D\x6F\x72\x65\x20\x64\x65\x74\x61\x69\x6C\x73\x2E\x0A\x23\x0A\x23\x20\x59\x6F\x75\x20\x73\x68\x6F\x75\x6C\x64\x20\x68\x61\x76\x65\x20\x72\x65\x63\x65\x69\x76\x65\x64\x20\x61\x20\x63\x6F\x70\x79\x20\x6F\x66\x20\x74\x68\x65\x20\x47\x4E\x55\x20\x4C\x69\x62\x72\x61\x72\x79\x20\x47\x65\x6E\x65\x72\x61\x6C\x20\x50\x75\x62\x6C\x69\x63\x0A\x23\x20\x4C\x69\x63\x65\x6E\x73\x65\x20\x61\x6C\x6F\x6E\x67\x20\x77\x69\x74\x68\x20\x74\x68\x69\x73\x20\x70\x72\x6F\x67\x72\x61\x6D\x3B\x20\x69\x66\x20\x6E\x6F\x74\x2C\x20\x77\x72\x69\x74\x65\x20\x74\x6F\x20\x74\x68\x65\x0A\x23\x20\x46\x72\x65\x65\x20\x53\x6F\x66\x74\x77\x61\x72\x65\x20\x46\x6F\x75\x6E\x64\x61\x74\x69\x6F\x6E\x2C\x20\x49\x6E\x63\x2E\x2C\x0A\x23\x20\x35\x31\x20\x46\x72\x61\x6E\x6B\x6C\x69\x6E\x20\x53\x74\x72\x65\x65\x74\x2C\x20\x46\x69\x66\x74\x68\x20\x46\x6C\x6F\x6F\x72\x2C\x20\x42\x6F\x73\x74\x6F\x6E\x2C\x20\x4D\x41\x20\x20\x30\x32\x31\x31\x30\x2D\x31\x33\x30\x31\x2C\x20\x55\x53\x41\x2E\x0A\x23\x0A\x0A\x69\x6D\x70\x6F\x72\x74\x20\x73\x79\x73\x0A\x69\x6D\x70\x6F\x72\x74\x20\x72\x65\x0A\x69\x6D\x70\x6F\x72\x74\x20\x73\x75\x62\x70\x72\x6F\x63\x65\x73\x73\x0A\x0A\x63\x6C\x61\x73\x73\x20\x43\x4D\x61\x6B\x65\x50\x61\x72\x73\x65\x72\x3A\x0A\x20\x20\x20\x20\x64\x65\x66\x20\x5F\x5F\x69\x6E\x69\x74\x5F\x5F\x28\x73\x65\x6C\x66\x2C\x20\x66\x69\x6C\x65\x6C\x69\x73\x74\x20\x3D\x20\x4E\x6F\x6E\x65\x29\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x66\x69\x6C\x65\x6C\x69\x73\x74\x20\x3D\x3D\x20\x4E\x6F\x6E\x65\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x6C\x65\x6C\x69\x73\x74\x20\x3D\x20\x73\x79\x73\x2E\x73\x74\x64\x69\x6E\x0A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x68\x61\x73\x5F\x6D\x6F\x64\x75\x6C\x65\x20\x3D\x20\x46\x61\x6C\x73\x65\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x69\x73\x5F\x61\x72\x63\x68\x65\x64\x20\x3D\x20\x46\x61\x6C\x73\x65\x0A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x69\x73\x61\x5F\x73\x75\x66\x20\x3D\x20\x73\x75\x62\x70\x72\x6F\x63\x65\x73\x73\x2E\x63\x68\x65\x63\x6B\x5F\x6F\x75\x74\x70\x75\x74\x28\x5B\x22\x2F\x75\x73\x72\x2F\x62\x69\x6E\x2F\x72\x70\x6D\x22\x2C\x20\x22\x2D\x45\x20\x25\x7B\x3F\x5F\x69\x73\x61\x7D\x22\x5D\x29\x2E\x64\x65\x63\x6F\x64\x65\x28\x29\x2E\x73\x74\x72\x69\x70\x28\x29\x0A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x74\x68\x73\x20\x3D\x20\x6D\x61\x70\x28\x6C\x61\x6D\x62\x64\x61\x20\x78\x3A\x20\x78\x2E\x72\x73\x74\x72\x69\x70\x28\x29\x2C\x20\x66\x69\x6C\x65\x6C\x69\x73\x74\x2E\x72\x65\x61\x64\x6C\x69\x6E\x65\x73\x28\x29\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x66\x6F\x72\x20\x70\x61\x74\x68\x20\x69\x6E\x20\x70\x61\x74\x68\x73\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x2C\x20\x63\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x2C\x20\x6C\x6F\x77\x65\x72\x63\x61\x73\x65\x20\x3D\x20\x73\x65\x6C\x66\x2E\x70\x61\x72\x73\x65\x43\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x43\x6F\x6E\x66\x69\x67\x28\x70\x61\x74\x68\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x20\x61\x6E\x64\x20\x63\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x68\x61\x73\x5F\x6D\x6F\x64\x75\x6C\x65\x20\x3D\x20\x54\x72\x75\x65\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x72\x65\x2E\x6D\x61\x74\x63\x68\x28\x22\x2E\x2A\x2F\x75\x73\x72\x2F\x6C\x69\x62\x28\x36\x34\x29\x3F\x2F\x63\x6D\x61\x6B\x65\x2F\x2E\x2A\x22\x2C\x20\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x29\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x73\x5F\x61\x72\x63\x68\x65\x64\x20\x3D\x20\x54\x72\x75\x65\x0A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x68\x61\x73\x5F\x6D\x6F\x64\x75\x6C\x65\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x69\x73\x5F\x61\x72\x63\x68\x65\x64\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6E\x74\x28\x22\x63\x6D\x61\x6B\x65\x2D\x66\x69\x6C\x65\x73\x79\x73\x74\x65\x6D\x25\x73\x22\x20\x25\x20\x69\x73\x61\x5F\x73\x75\x66\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6C\x73\x65\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6E\x74\x28\x22\x63\x6D\x61\x6B\x65\x2D\x66\x69\x6C\x65\x73\x79\x73\x74\x65\x6D\x22\x29\x0A\x0A\x0A\x20\x20\x20\x20\x64\x65\x66\x20\x70\x61\x72\x73\x65\x43\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x43\x6F\x6E\x66\x69\x67\x28\x73\x65\x6C\x66\x2C\x20\x63\x6F\x6E\x66\x69\x67\x46\x69\x6C\x65\x29\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x74\x68\x73\x20\x3D\x20\x63\x6F\x6E\x66\x69\x67\x46\x69\x6C\x65\x2E\x72\x73\x70\x6C\x69\x74\x28\x22\x2F\x22\x2C\x20\x33\x29\x0A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x20\x3D\x20\x22\x25\x73\x2F\x63\x6D\x61\x6B\x65\x2F\x25\x73\x22\x20\x25\x20\x28\x70\x61\x74\x68\x73\x5B\x30\x5D\x2C\x20\x70\x61\x74\x68\x73\x5B\x32\x5D\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x63\x66\x67\x46\x69\x6C\x65\x20\x3D\x20\x70\x61\x74\x68\x73\x5B\x33\x5D\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x63\x66\x67\x46\x69\x6C\x65\x2E\x65\x6E\x64\x73\x77\x69\x74\x68\x28\x22\x43\x6F\x6E\x66\x69\x67\x2E\x63\x6D\x61\x6B\x65\x22\x29\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6E\x20\x28\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x2C\x20\x63\x66\x67\x46\x69\x6C\x65\x5B\x30\x3A\x2D\x6C\x65\x6E\x28\x22\x43\x6F\x6E\x66\x69\x67\x2E\x63\x6D\x61\x6B\x65\x22\x29\x5D\x2C\x20\x46\x61\x6C\x73\x65\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6C\x69\x66\x20\x63\x66\x67\x46\x69\x6C\x65\x2E\x65\x6E\x64\x73\x77\x69\x74\x68\x28\x22\x2D\x63\x6F\x6E\x66\x69\x67\x2E\x63\x6D\x61\x6B\x65\x22\x29\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6E\x20\x28\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x2C\x20\x63\x66\x67\x46\x69\x6C\x65\x5B\x30\x3A\x2D\x6C\x65\x6E\x28\x22\x2D\x63\x6F\x6E\x66\x69\x67\x2E\x63\x6D\x61\x6B\x65\x22\x29\x5D\x2C\x20\x54\x72\x75\x65\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6C\x73\x65\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6E\x20\x28\x4E\x6F\x6E\x65\x2C\x20\x4E\x6F\x6E\x65\x2C\x20\x46\x61\x6C\x73\x65\x29\x0A\x0A\x0A\x69\x66\x20\x5F\x5F\x6E\x61\x6D\x65\x5F\x5F\x20\x3D\x3D\x20\x22\x5F\x5F\x6D\x61\x69\x6E\x5F\x5F\x22\x3A\x0A\x20\x20\x20\x20\x70\x61\x72\x73\x65\x72\x20\x3D\x20\x43\x4D\x61\x6B\x65\x50\x61\x72\x73\x65\x72\x28\x29\x0A' | dd seek=$((0x0)) conv=notrunc bs=1 of=usr/lib/rpm/cmake.req
sleep 1
chmod 0755 usr/lib/rpm/cmake.req
printf '\x23\x21\x2F\x75\x73\x72\x2F\x62\x69\x6E\x2F\x70\x79\x74\x68\x6F\x6E\x0A\x23\x20\x2D\x2A\x2D\x20\x63\x6F\x64\x69\x6E\x67\x3A\x75\x74\x66\x2D\x38\x20\x2D\x2A\x2D\x0A\x23\x0A\x23\x20\x43\x6F\x70\x79\x72\x69\x67\x68\x74\x20\x28\x43\x29\x20\x32\x30\x31\x35\x20\x44\x61\x6E\x69\x65\x6C\x20\x56\x72\xC3\xA1\x74\x69\x6C\x20\x3C\x64\x76\x72\x61\x74\x69\x6C\x40\x72\x65\x64\x68\x61\x74\x2E\x63\x6F\x6D\x3E\x0A\x23\x20\x43\x6F\x70\x79\x72\x69\x67\x68\x74\x20\x28\x43\x29\x20\x32\x30\x31\x37\x20\x44\x61\x6E\x69\x65\x6C\x20\x56\x72\xC3\xA1\x74\x69\x6C\x20\x3C\x64\x76\x72\x61\x74\x69\x6C\x40\x66\x65\x64\x6F\x72\x61\x70\x72\x6F\x6A\x65\x63\x74\x2E\x6F\x72\x67\x3E\x0A\x23\x0A\x23\x0A\x23\x20\x54\x68\x69\x73\x20\x70\x72\x6F\x67\x72\x61\x6D\x20\x69\x73\x20\x66\x72\x65\x65\x20\x73\x6F\x66\x74\x77\x61\x72\x65\x3B\x20\x79\x6F\x75\x20\x63\x61\x6E\x20\x72\x65\x64\x69\x73\x74\x72\x69\x62\x75\x74\x65\x20\x69\x74\x20\x61\x6E\x64\x2F\x6F\x72\x20\x6D\x6F\x64\x69\x66\x79\x0A\x23\x20\x69\x74\x20\x75\x6E\x64\x65\x72\x20\x74\x68\x65\x20\x74\x65\x72\x6D\x73\x20\x6F\x66\x20\x74\x68\x65\x20\x47\x4E\x55\x20\x4C\x69\x62\x72\x61\x72\x79\x20\x47\x65\x6E\x65\x72\x61\x6C\x20\x50\x75\x62\x6C\x69\x63\x20\x4C\x69\x63\x65\x6E\x73\x65\x20\x61\x73\x0A\x23\x20\x70\x75\x62\x6C\x69\x73\x68\x65\x64\x20\x62\x79\x20\x74\x68\x65\x20\x46\x72\x65\x65\x20\x53\x6F\x66\x74\x77\x61\x72\x65\x20\x46\x6F\x75\x6E\x64\x61\x74\x69\x6F\x6E\x3B\x20\x65\x69\x74\x68\x65\x72\x20\x76\x65\x72\x73\x69\x6F\x6E\x20\x32\x20\x6F\x66\x20\x74\x68\x65\x0A\x23\x20\x4C\x69\x63\x65\x6E\x73\x65\x2C\x20\x6F\x72\x20\x28\x61\x74\x20\x79\x6F\x75\x72\x20\x6F\x70\x74\x69\x6F\x6E\x29\x20\x61\x6E\x79\x20\x6C\x61\x74\x65\x72\x20\x76\x65\x72\x73\x69\x6F\x6E\x2E\x0A\x23\x0A\x23\x20\x54\x68\x69\x73\x20\x70\x72\x6F\x67\x72\x61\x6D\x20\x69\x73\x20\x64\x69\x73\x74\x72\x69\x62\x75\x74\x65\x64\x20\x69\x6E\x20\x74\x68\x65\x20\x68\x6F\x70\x65\x20\x74\x68\x61\x74\x20\x69\x74\x20\x77\x69\x6C\x6C\x20\x62\x65\x20\x75\x73\x65\x66\x75\x6C\x2C\x0A\x23\x20\x62\x75\x74\x20\x57\x49\x54\x48\x4F\x55\x54\x20\x41\x4E\x59\x20\x57\x41\x52\x52\x41\x4E\x54\x59\x3B\x20\x77\x69\x74\x68\x6F\x75\x74\x20\x65\x76\x65\x6E\x20\x74\x68\x65\x20\x69\x6D\x70\x6C\x69\x65\x64\x20\x77\x61\x72\x72\x61\x6E\x74\x79\x20\x6F\x66\x0A\x23\x20\x4D\x45\x52\x43\x48\x41\x4E\x54\x41\x42\x49\x4C\x49\x54\x59\x20\x6F\x72\x20\x46\x49\x54\x4E\x45\x53\x53\x20\x46\x4F\x52\x20\x41\x20\x50\x41\x52\x54\x49\x43\x55\x4C\x41\x52\x20\x50\x55\x52\x50\x4F\x53\x45\x2E\x20\x20\x53\x65\x65\x20\x74\x68\x65\x0A\x23\x20\x47\x4E\x55\x20\x47\x65\x6E\x65\x72\x61\x6C\x20\x50\x75\x62\x6C\x69\x63\x20\x4C\x69\x63\x65\x6E\x73\x65\x20\x66\x6F\x72\x20\x6D\x6F\x72\x65\x20\x64\x65\x74\x61\x69\x6C\x73\x2E\x0A\x23\x0A\x23\x20\x59\x6F\x75\x20\x73\x68\x6F\x75\x6C\x64\x20\x68\x61\x76\x65\x20\x72\x65\x63\x65\x69\x76\x65\x64\x20\x61\x20\x63\x6F\x70\x79\x20\x6F\x66\x20\x74\x68\x65\x20\x47\x4E\x55\x20\x4C\x69\x62\x72\x61\x72\x79\x20\x47\x65\x6E\x65\x72\x61\x6C\x20\x50\x75\x62\x6C\x69\x63\x0A\x23\x20\x4C\x69\x63\x65\x6E\x73\x65\x20\x61\x6C\x6F\x6E\x67\x20\x77\x69\x74\x68\x20\x74\x68\x69\x73\x20\x70\x72\x6F\x67\x72\x61\x6D\x3B\x20\x69\x66\x20\x6E\x6F\x74\x2C\x20\x77\x72\x69\x74\x65\x20\x74\x6F\x20\x74\x68\x65\x0A\x23\x20\x46\x72\x65\x65\x20\x53\x6F\x66\x74\x77\x61\x72\x65\x20\x46\x6F\x75\x6E\x64\x61\x74\x69\x6F\x6E\x2C\x20\x49\x6E\x63\x2E\x2C\x0A\x23\x20\x35\x31\x20\x46\x72\x61\x6E\x6B\x6C\x69\x6E\x20\x53\x74\x72\x65\x65\x74\x2C\x20\x46\x69\x66\x74\x68\x20\x46\x6C\x6F\x6F\x72\x2C\x20\x42\x6F\x73\x74\x6F\x6E\x2C\x20\x4D\x41\x20\x20\x30\x32\x31\x31\x30\x2D\x31\x33\x30\x31\x2C\x20\x55\x53\x41\x2E\x0A\x23\x0A\x0A\x69\x6D\x70\x6F\x72\x74\x20\x73\x79\x73\x0A\x69\x6D\x70\x6F\x72\x74\x20\x72\x65\x0A\x69\x6D\x70\x6F\x72\x74\x20\x67\x6C\x6F\x62\x0A\x0A\x63\x6C\x61\x73\x73\x20\x43\x4D\x61\x6B\x65\x50\x61\x72\x73\x65\x72\x3A\x0A\x20\x20\x20\x20\x64\x65\x66\x20\x5F\x5F\x69\x6E\x69\x74\x5F\x5F\x28\x73\x65\x6C\x66\x2C\x20\x66\x69\x6C\x65\x6C\x69\x73\x74\x20\x3D\x20\x4E\x6F\x6E\x65\x29\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x66\x69\x6C\x65\x6C\x69\x73\x74\x20\x3D\x3D\x20\x4E\x6F\x6E\x65\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x69\x6C\x65\x6C\x69\x73\x74\x20\x3D\x20\x73\x79\x73\x2E\x73\x74\x64\x69\x6E\x0A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x74\x68\x73\x20\x3D\x20\x6D\x61\x70\x28\x6C\x61\x6D\x62\x64\x61\x20\x78\x3A\x20\x78\x2E\x72\x73\x74\x72\x69\x70\x28\x29\x2C\x20\x66\x69\x6C\x65\x6C\x69\x73\x74\x2E\x72\x65\x61\x64\x6C\x69\x6E\x65\x73\x28\x29\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x66\x6F\x72\x20\x70\x61\x74\x68\x20\x69\x6E\x20\x70\x61\x74\x68\x73\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x2C\x20\x63\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x2C\x20\x6C\x6F\x77\x65\x72\x63\x61\x73\x65\x20\x3D\x20\x73\x65\x6C\x66\x2E\x70\x61\x72\x73\x65\x43\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x43\x6F\x6E\x66\x69\x67\x28\x70\x61\x74\x68\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x20\x61\x6E\x64\x20\x63\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x76\x65\x72\x73\x69\x6F\x6E\x20\x3D\x20\x73\x65\x6C\x66\x2E\x72\x65\x73\x6F\x6C\x76\x65\x43\x4D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x56\x65\x72\x73\x69\x6F\x6E\x28\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x2C\x20\x63\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x2C\x20\x6C\x6F\x77\x65\x72\x63\x61\x73\x65\x29\x0A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x76\x65\x72\x73\x69\x6F\x6E\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x74\x72\x69\x6E\x67\x20\x3D\x20\x22\x63\x6D\x61\x6B\x65\x28\x22\x20\x2B\x20\x63\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x20\x2B\x20\x22\x29\x20\x3D\x20\x22\x20\x2B\x20\x76\x65\x72\x73\x69\x6F\x6E\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6C\x73\x65\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x73\x74\x72\x69\x6E\x67\x20\x3D\x20\x22\x63\x6D\x61\x6B\x65\x28\x22\x20\x2B\x20\x63\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x20\x2B\x20\x22\x29\x22\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x73\x74\x72\x69\x6E\x67\x20\x3D\x3D\x20\x73\x74\x72\x69\x6E\x67\x2E\x6C\x6F\x77\x65\x72\x28\x29\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6E\x74\x28\x73\x74\x72\x69\x6E\x67\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6C\x73\x65\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x20\x54\x65\x6D\x70\x6F\x72\x61\x72\x69\x6C\x79\x20\x70\x72\x69\x6E\x74\x20\x62\x6F\x74\x68\x20\x76\x61\x72\x69\x61\x6E\x74\x73\x20\x74\x6F\x20\x73\x61\x74\x69\x73\x66\x79\x20\x72\x65\x71\x75\x69\x72\x65\x73\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x20\x62\x79\x20\x74\x68\x65\x20\x6F\x6C\x64\x20\x76\x65\x72\x73\x69\x6F\x6E\x20\x6F\x66\x20\x74\x68\x69\x73\x20\x67\x65\x6E\x65\x72\x61\x74\x6F\x72\x20\x77\x68\x69\x63\x68\x20\x6D\x61\x64\x65\x20\x6D\x69\x73\x74\x61\x6B\x65\x73\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6E\x74\x28\x73\x74\x72\x69\x6E\x67\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x70\x72\x69\x6E\x74\x28\x73\x74\x72\x69\x6E\x67\x2E\x6C\x6F\x77\x65\x72\x28\x29\x29\x0A\x0A\x0A\x20\x20\x20\x20\x64\x65\x66\x20\x70\x61\x72\x73\x65\x43\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x43\x6F\x6E\x66\x69\x67\x28\x73\x65\x6C\x66\x2C\x20\x63\x6F\x6E\x66\x69\x67\x46\x69\x6C\x65\x29\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x70\x61\x74\x68\x73\x20\x3D\x20\x63\x6F\x6E\x66\x69\x67\x46\x69\x6C\x65\x2E\x72\x73\x70\x6C\x69\x74\x28\x22\x2F\x22\x2C\x20\x33\x29\x0A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x20\x3D\x20\x22\x25\x73\x2F\x63\x6D\x61\x6B\x65\x2F\x25\x73\x22\x20\x25\x20\x28\x70\x61\x74\x68\x73\x5B\x30\x5D\x2C\x20\x70\x61\x74\x68\x73\x5B\x32\x5D\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x63\x66\x67\x46\x69\x6C\x65\x20\x3D\x20\x70\x61\x74\x68\x73\x5B\x33\x5D\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x63\x66\x67\x46\x69\x6C\x65\x2E\x65\x6E\x64\x73\x77\x69\x74\x68\x28\x22\x43\x6F\x6E\x66\x69\x67\x2E\x63\x6D\x61\x6B\x65\x22\x29\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6E\x20\x28\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x2C\x20\x63\x66\x67\x46\x69\x6C\x65\x5B\x30\x3A\x2D\x6C\x65\x6E\x28\x22\x43\x6F\x6E\x66\x69\x67\x2E\x63\x6D\x61\x6B\x65\x22\x29\x5D\x2C\x20\x46\x61\x6C\x73\x65\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6C\x69\x66\x20\x63\x66\x67\x46\x69\x6C\x65\x2E\x65\x6E\x64\x73\x77\x69\x74\x68\x28\x22\x2D\x63\x6F\x6E\x66\x69\x67\x2E\x63\x6D\x61\x6B\x65\x22\x29\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6E\x20\x28\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x2C\x20\x63\x66\x67\x46\x69\x6C\x65\x5B\x30\x3A\x2D\x6C\x65\x6E\x28\x22\x2D\x63\x6F\x6E\x66\x69\x67\x2E\x63\x6D\x61\x6B\x65\x22\x29\x5D\x2C\x20\x54\x72\x75\x65\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x65\x6C\x73\x65\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6E\x20\x28\x4E\x6F\x6E\x65\x2C\x20\x4E\x6F\x6E\x65\x2C\x20\x46\x61\x6C\x73\x65\x29\x0A\x0A\x20\x20\x20\x20\x64\x65\x66\x20\x72\x65\x73\x6F\x6C\x76\x65\x43\x4D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x56\x65\x72\x73\x69\x6F\x6E\x28\x73\x65\x6C\x66\x2C\x20\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x2C\x20\x63\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x2C\x20\x6C\x6F\x77\x65\x72\x63\x61\x73\x65\x29\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x76\x65\x72\x73\x69\x6F\x6E\x46\x69\x6C\x65\x20\x3D\x20\x28\x22\x25\x73\x2F\x25\x73\x2D\x63\x6F\x6E\x66\x69\x67\x2D\x76\x65\x72\x73\x69\x6F\x6E\x2E\x63\x6D\x61\x6B\x65\x22\x20\x69\x66\x20\x6C\x6F\x77\x65\x72\x63\x61\x73\x65\x20\x65\x6C\x73\x65\x20\x22\x25\x73\x2F\x25\x73\x43\x6F\x6E\x66\x69\x67\x56\x65\x72\x73\x69\x6F\x6E\x2E\x63\x6D\x61\x6B\x65\x22\x29\x20\x25\x20\x28\x6D\x6F\x64\x75\x6C\x65\x50\x61\x74\x68\x2C\x20\x63\x6D\x61\x6B\x65\x4D\x6F\x64\x75\x6C\x65\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x74\x72\x79\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x66\x20\x3D\x20\x6F\x70\x65\x6E\x28\x76\x65\x72\x73\x69\x6F\x6E\x46\x69\x6C\x65\x2C\x20\x27\x72\x27\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x65\x78\x63\x65\x70\x74\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6E\x20\x4E\x6F\x6E\x65\x0A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x66\x6F\x72\x20\x6C\x69\x6E\x65\x20\x69\x6E\x20\x66\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x6C\x69\x6E\x65\x20\x3D\x20\x6C\x69\x6E\x65\x2E\x73\x74\x72\x69\x70\x28\x29\x0A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x23\x20\x73\x65\x74\x28\x50\x41\x43\x4B\x41\x47\x45\x5F\x56\x45\x52\x53\x49\x4F\x4E\x20\x3C\x76\x65\x72\x73\x69\x6F\x6E\x3E\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x76\x65\x72\x73\x69\x6F\x6E\x20\x3D\x20\x72\x65\x2E\x6D\x61\x74\x63\x68\x28\x72\x22\x5E\x73\x65\x74\x5B\x5C\x20\x5D\x2A\x5C\x28\x5B\x5C\x20\x5D\x2A\x50\x41\x43\x4B\x41\x47\x45\x5F\x56\x45\x52\x53\x49\x4F\x4E\x5B\x5C\x20\x5D\x2B\x5B\x5C\x22\x5D\x2A\x28\x5B\x30\x2D\x39\x5C\x2E\x5D\x2B\x29\x5B\x5C\x22\x5D\x2A\x5B\x5C\x20\x5D\x2A\x5B\x2E\x5D\x2A\x5C\x29\x22\x2C\x20\x6C\x69\x6E\x65\x29\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x69\x66\x20\x76\x65\x72\x73\x69\x6F\x6E\x3A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6E\x20\x76\x65\x72\x73\x69\x6F\x6E\x2E\x67\x72\x6F\x75\x70\x73\x28\x31\x29\x5B\x30\x5D\x0A\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x72\x65\x74\x75\x72\x6E\x20\x4E\x6F\x6E\x65\x0A\x0A\x69\x66\x20\x5F\x5F\x6E\x61\x6D\x65\x5F\x5F\x20\x3D\x3D\x20\x22\x5F\x5F\x6D\x61\x69\x6E\x5F\x5F\x22\x3A\x0A\x20\x20\x20\x20\x70\x61\x72\x73\x65\x72\x20\x3D\x20\x43\x4D\x61\x6B\x65\x50\x61\x72\x73\x65\x72\x28\x29\x0A' | dd seek=$((0x0)) conv=notrunc bs=1 of=usr/lib/rpm/cmake.prov
sleep 1
chmod 0755 usr/lib/rpm/cmake.prov
printf '\x23\x0A\x23\x20\x4D\x61\x63\x72\x6F\x73\x20\x66\x6F\x72\x20\x63\x6D\x61\x6B\x65\x0A\x23\x0A\x25\x5F\x63\x6D\x61\x6B\x65\x5F\x6C\x69\x62\x5F\x73\x75\x66\x66\x69\x78\x36\x34\x20\x2D\x44\x4C\x49\x42\x5F\x53\x55\x46\x46\x49\x58\x3D\x36\x34\x0A\x25\x5F\x63\x6D\x61\x6B\x65\x5F\x73\x68\x61\x72\x65\x64\x5F\x6C\x69\x62\x73\x20\x2D\x44\x42\x55\x49\x4C\x44\x5F\x53\x48\x41\x52\x45\x44\x5F\x4C\x49\x42\x53\x3A\x42\x4F\x4F\x4C\x3D\x4F\x4E\x0A\x25\x5F\x63\x6D\x61\x6B\x65\x5F\x73\x6B\x69\x70\x5F\x72\x70\x61\x74\x68\x20\x2D\x44\x43\x4D\x41\x4B\x45\x5F\x53\x4B\x49\x50\x5F\x52\x50\x41\x54\x48\x3A\x42\x4F\x4F\x4C\x3D\x4F\x4E\x0A\x25\x5F\x63\x6D\x61\x6B\x65\x5F\x76\x65\x72\x73\x69\x6F\x6E\x20\x33\x2E\x31\x38\x2E\x35\x0A\x25\x5F\x5F\x63\x6D\x61\x6B\x65\x20\x2F\x75\x73\x72\x2F\x62\x69\x6E\x2F\x63\x6D\x61\x6B\x65\x0A\x25\x5F\x5F\x63\x74\x65\x73\x74\x20\x2F\x75\x73\x72\x2F\x62\x69\x6E\x2F\x63\x74\x65\x73\x74\x0A\x25\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x62\x75\x69\x6C\x64\x64\x69\x72\x20\x25\x7B\x21\x3F\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x69\x6E\x5F\x73\x6F\x75\x72\x63\x65\x5F\x62\x75\x69\x6C\x64\x3A\x25\x7B\x5F\x76\x70\x61\x74\x68\x5F\x62\x75\x69\x6C\x64\x64\x69\x72\x7D\x7D\x25\x7B\x3F\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x69\x6E\x5F\x73\x6F\x75\x72\x63\x65\x5F\x62\x75\x69\x6C\x64\x3A\x2E\x7D\x0A\x0A\x23\x20\x2D\x20\x53\x65\x74\x20\x64\x65\x66\x61\x75\x6C\x74\x20\x63\x6F\x6D\x70\x69\x6C\x65\x20\x66\x6C\x61\x67\x73\x0A\x23\x20\x2D\x20\x43\x4D\x41\x4B\x45\x5F\x2A\x5F\x46\x4C\x41\x47\x53\x5F\x52\x45\x4C\x45\x41\x53\x45\x20\x61\x72\x65\x20\x61\x64\x64\x65\x64\x20\x2A\x61\x66\x74\x65\x72\x2A\x20\x74\x68\x65\x20\x2A\x46\x4C\x41\x47\x53\x20\x65\x6E\x76\x69\x72\x6F\x6E\x6D\x65\x6E\x74\x20\x76\x61\x72\x69\x61\x62\x6C\x65\x73\x0A\x23\x20\x61\x6E\x64\x20\x64\x65\x66\x61\x75\x6C\x74\x20\x74\x6F\x20\x2D\x4F\x33\x20\x2D\x44\x4E\x44\x45\x42\x55\x47\x2E\x20\x20\x53\x74\x72\x69\x70\x20\x74\x68\x65\x20\x2D\x4F\x33\x20\x73\x6F\x20\x77\x65\x20\x63\x61\x6E\x20\x6F\x76\x65\x72\x72\x69\x64\x65\x20\x77\x69\x74\x68\x20\x2A\x46\x4C\x41\x47\x53\x0A\x23\x20\x2D\x20\x54\x75\x72\x6E\x20\x6F\x6E\x20\x76\x65\x72\x62\x6F\x73\x65\x20\x6D\x61\x6B\x65\x66\x69\x6C\x65\x73\x20\x73\x6F\x20\x77\x65\x20\x63\x61\x6E\x20\x73\x65\x65\x20\x61\x6E\x64\x20\x76\x65\x72\x69\x66\x79\x20\x63\x6F\x6D\x70\x69\x6C\x65\x20\x66\x6C\x61\x67\x73\x0A\x23\x20\x2D\x20\x53\x65\x74\x20\x64\x65\x66\x61\x75\x6C\x74\x20\x69\x6E\x73\x74\x61\x6C\x6C\x20\x70\x72\x65\x66\x69\x78\x65\x73\x20\x61\x6E\x64\x20\x6C\x69\x62\x72\x61\x72\x79\x20\x69\x6E\x73\x74\x61\x6C\x6C\x20\x64\x69\x72\x65\x63\x74\x6F\x72\x69\x65\x73\x0A\x23\x20\x2D\x20\x54\x75\x72\x6E\x20\x6F\x6E\x20\x73\x68\x61\x72\x65\x64\x20\x6C\x69\x62\x72\x61\x72\x69\x65\x73\x20\x62\x79\x20\x64\x65\x66\x61\x75\x6C\x74\x0A\x25\x63\x6D\x61\x6B\x65\x20\x5C\x0A\x25\x69\x66\x20\x30\x25\x7B\x3F\x73\x65\x74\x5F\x62\x75\x69\x6C\x64\x5F\x66\x6C\x61\x67\x73\x3A\x31\x7D\x20\x5C\x0A\x20\x20\x25\x73\x65\x74\x5F\x62\x75\x69\x6C\x64\x5F\x66\x6C\x61\x67\x73\x20\x5C\x0A\x25\x65\x6C\x73\x65\x20\x5C\x0A\x20\x20\x43\x46\x4C\x41\x47\x53\x3D\x22\x24\x7B\x43\x46\x4C\x41\x47\x53\x3A\x2D\x25\x6F\x70\x74\x66\x6C\x61\x67\x73\x7D\x22\x20\x3B\x20\x65\x78\x70\x6F\x72\x74\x20\x43\x46\x4C\x41\x47\x53\x20\x3B\x20\x5C\x0A\x20\x20\x43\x58\x58\x46\x4C\x41\x47\x53\x3D\x22\x24\x7B\x43\x58\x58\x46\x4C\x41\x47\x53\x3A\x2D\x25\x6F\x70\x74\x66\x6C\x61\x67\x73\x7D\x22\x20\x3B\x20\x65\x78\x70\x6F\x72\x74\x20\x43\x58\x58\x46\x4C\x41\x47\x53\x20\x3B\x20\x5C\x0A\x20\x20\x46\x46\x4C\x41\x47\x53\x3D\x22\x24\x7B\x46\x46\x4C\x41\x47\x53\x3A\x2D\x25\x6F\x70\x74\x66\x6C\x61\x67\x73\x25\x7B\x3F\x5F\x66\x6D\x6F\x64\x64\x69\x72\x3A\x20\x2D\x49\x25\x5F\x66\x6D\x6F\x64\x64\x69\x72\x7D\x7D\x22\x20\x3B\x20\x65\x78\x70\x6F\x72\x74\x20\x46\x46\x4C\x41\x47\x53\x20\x3B\x20\x5C\x0A\x20\x20\x46\x43\x46\x4C\x41\x47\x53\x3D\x22\x24\x7B\x46\x43\x46\x4C\x41\x47\x53\x3A\x2D\x25\x6F\x70\x74\x66\x6C\x61\x67\x73\x25\x7B\x3F\x5F\x66\x6D\x6F\x64\x64\x69\x72\x3A\x20\x2D\x49\x25\x5F\x66\x6D\x6F\x64\x64\x69\x72\x7D\x7D\x22\x20\x3B\x20\x65\x78\x70\x6F\x72\x74\x20\x46\x43\x46\x4C\x41\x47\x53\x20\x3B\x20\x5C\x0A\x20\x20\x25\x7B\x3F\x5F\x5F\x67\x6C\x6F\x62\x61\x6C\x5F\x6C\x64\x66\x6C\x61\x67\x73\x3A\x4C\x44\x46\x4C\x41\x47\x53\x3D\x22\x24\x7B\x4C\x44\x46\x4C\x41\x47\x53\x3A\x2D\x25\x5F\x5F\x67\x6C\x6F\x62\x61\x6C\x5F\x6C\x64\x66\x6C\x61\x67\x73\x7D\x22\x20\x3B\x20\x65\x78\x70\x6F\x72\x74\x20\x4C\x44\x46\x4C\x41\x47\x53\x20\x3B\x7D\x20\x5C\x0A\x25\x65\x6E\x64\x69\x66\x20\x5C\x0A\x20\x20\x25\x5F\x5F\x63\x6D\x61\x6B\x65\x20\x5C\x5C\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x25\x7B\x21\x3F\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x69\x6E\x5F\x73\x6F\x75\x72\x63\x65\x5F\x62\x75\x69\x6C\x64\x3A\x2D\x53\x20\x22\x25\x7B\x5F\x76\x70\x61\x74\x68\x5F\x73\x72\x63\x64\x69\x72\x7D\x22\x7D\x20\x5C\x5C\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x25\x7B\x21\x3F\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x69\x6E\x5F\x73\x6F\x75\x72\x63\x65\x5F\x62\x75\x69\x6C\x64\x3A\x2D\x42\x20\x22\x25\x7B\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x62\x75\x69\x6C\x64\x64\x69\x72\x7D\x22\x7D\x20\x5C\x5C\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x2D\x44\x43\x4D\x41\x4B\x45\x5F\x43\x5F\x46\x4C\x41\x47\x53\x5F\x52\x45\x4C\x45\x41\x53\x45\x3A\x53\x54\x52\x49\x4E\x47\x3D\x22\x2D\x44\x4E\x44\x45\x42\x55\x47\x22\x20\x5C\x5C\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x2D\x44\x43\x4D\x41\x4B\x45\x5F\x43\x58\x58\x5F\x46\x4C\x41\x47\x53\x5F\x52\x45\x4C\x45\x41\x53\x45\x3A\x53\x54\x52\x49\x4E\x47\x3D\x22\x2D\x44\x4E\x44\x45\x42\x55\x47\x22\x20\x5C\x5C\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x2D\x44\x43\x4D\x41\x4B\x45\x5F\x46\x6F\x72\x74\x72\x61\x6E\x5F\x46\x4C\x41\x47\x53\x5F\x52\x45\x4C\x45\x41\x53\x45\x3A\x53\x54\x52\x49\x4E\x47\x3D\x22\x2D\x44\x4E\x44\x45\x42\x55\x47\x22\x20\x5C\x5C\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x2D\x44\x43\x4D\x41\x4B\x45\x5F\x56\x45\x52\x42\x4F\x53\x45\x5F\x4D\x41\x4B\x45\x46\x49\x4C\x45\x3A\x42\x4F\x4F\x4C\x3D\x4F\x4E\x20\x5C\x5C\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x2D\x44\x43\x4D\x41\x4B\x45\x5F\x49\x4E\x53\x54\x41\x4C\x4C\x5F\x50\x52\x45\x46\x49\x58\x3A\x50\x41\x54\x48\x3D\x25\x7B\x5F\x70\x72\x65\x66\x69\x78\x7D\x20\x5C\x5C\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x2D\x44\x49\x4E\x43\x4C\x55\x44\x45\x5F\x49\x4E\x53\x54\x41\x4C\x4C\x5F\x44\x49\x52\x3A\x50\x41\x54\x48\x3D\x25\x7B\x5F\x69\x6E\x63\x6C\x75\x64\x65\x64\x69\x72\x7D\x20\x5C\x5C\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x2D\x44\x4C\x49\x42\x5F\x49\x4E\x53\x54\x41\x4C\x4C\x5F\x44\x49\x52\x3A\x50\x41\x54\x48\x3D\x25\x7B\x5F\x6C\x69\x62\x64\x69\x72\x7D\x20\x5C\x5C\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x2D\x44\x53\x59\x53\x43\x4F\x4E\x46\x5F\x49\x4E\x53\x54\x41\x4C\x4C\x5F\x44\x49\x52\x3A\x50\x41\x54\x48\x3D\x25\x7B\x5F\x73\x79\x73\x63\x6F\x6E\x66\x64\x69\x72\x7D\x20\x5C\x5C\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x2D\x44\x53\x48\x41\x52\x45\x5F\x49\x4E\x53\x54\x41\x4C\x4C\x5F\x50\x52\x45\x46\x49\x58\x3A\x50\x41\x54\x48\x3D\x25\x7B\x5F\x64\x61\x74\x61\x64\x69\x72\x7D\x20\x5C\x5C\x5C\x0A\x25\x69\x66\x20\x22\x25\x7B\x3F\x5F\x6C\x69\x62\x7D\x22\x20\x3D\x3D\x20\x22\x6C\x69\x62\x36\x34\x22\x20\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x25\x7B\x3F\x5F\x63\x6D\x61\x6B\x65\x5F\x6C\x69\x62\x5F\x73\x75\x66\x66\x69\x78\x36\x34\x7D\x20\x5C\x5C\x5C\x0A\x25\x65\x6E\x64\x69\x66\x20\x5C\x0A\x20\x20\x20\x20\x20\x20\x20\x20\x25\x7B\x3F\x5F\x63\x6D\x61\x6B\x65\x5F\x73\x68\x61\x72\x65\x64\x5F\x6C\x69\x62\x73\x7D\x0A\x0A\x25\x63\x6D\x61\x6B\x65\x5F\x62\x75\x69\x6C\x64\x20\x5C\x0A\x20\x20\x25\x5F\x5F\x63\x6D\x61\x6B\x65\x20\x2D\x2D\x62\x75\x69\x6C\x64\x20\x22\x25\x7B\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x62\x75\x69\x6C\x64\x64\x69\x72\x7D\x22\x20\x25\x7B\x3F\x5F\x73\x6D\x70\x5F\x6D\x66\x6C\x61\x67\x73\x7D\x20\x2D\x2D\x76\x65\x72\x62\x6F\x73\x65\x0A\x0A\x25\x63\x6D\x61\x6B\x65\x5F\x69\x6E\x73\x74\x61\x6C\x6C\x20\x5C\x0A\x20\x20\x44\x45\x53\x54\x44\x49\x52\x3D\x22\x25\x7B\x62\x75\x69\x6C\x64\x72\x6F\x6F\x74\x7D\x22\x20\x25\x5F\x5F\x63\x6D\x61\x6B\x65\x20\x2D\x2D\x69\x6E\x73\x74\x61\x6C\x6C\x20\x22\x25\x7B\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x62\x75\x69\x6C\x64\x64\x69\x72\x7D\x22\x0A\x0A\x25\x63\x74\x65\x73\x74\x28\x3A\x2D\x3A\x29\x20\x5C\x0A\x20\x20\x63\x64\x20\x22\x25\x7B\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x62\x75\x69\x6C\x64\x64\x69\x72\x7D\x22\x20\x5C\x0A\x20\x20\x25\x5F\x5F\x63\x74\x65\x73\x74\x20\x2D\x2D\x6F\x75\x74\x70\x75\x74\x2D\x6F\x6E\x2D\x66\x61\x69\x6C\x75\x72\x65\x20\x2D\x2D\x66\x6F\x72\x63\x65\x2D\x6E\x65\x77\x2D\x63\x74\x65\x73\x74\x2D\x70\x72\x6F\x63\x65\x73\x73\x20\x25\x7B\x3F\x5F\x73\x6D\x70\x5F\x6D\x66\x6C\x61\x67\x73\x7D\x20\x25\x7B\x2A\x2A\x7D\x20\x5C\x0A\x20\x20\x63\x64\x20\x2D\x0A\x0A\x0A\x25\x63\x6D\x61\x6B\x65\x33\x20\x25\x63\x6D\x61\x6B\x65\x0A\x25\x63\x6D\x61\x6B\x65\x33\x5F\x62\x75\x69\x6C\x64\x20\x25\x63\x6D\x61\x6B\x65\x5F\x62\x75\x69\x6C\x64\x0A\x25\x63\x6D\x61\x6B\x65\x33\x5F\x69\x6E\x73\x74\x61\x6C\x6C\x20\x25\x63\x6D\x61\x6B\x65\x5F\x69\x6E\x73\x74\x61\x6C\x6C\x0A\x25\x63\x74\x65\x73\x74\x33\x28\x3A\x2D\x3A\x29\x20\x25\x63\x74\x65\x73\x74\x20\x25\x7B\x2A\x2A\x7D\x0A' | dd seek=$((0x0)) conv=notrunc bs=1 of=usr/lib/rpm/macros.d/macros.cmake
sleep 1
chmod 0644 usr/lib/rpm/macros.d/macros.cmake
printf '\x25\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x70\x72\x6F\x76\x69\x64\x65\x73\x09\x25\x7B\x5F\x72\x70\x6D\x63\x6F\x6E\x66\x69\x67\x64\x69\x72\x7D\x2F\x63\x6D\x61\x6B\x65\x2E\x70\x72\x6F\x76\x0A\x25\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x72\x65\x71\x75\x69\x72\x65\x73\x09\x25\x7B\x5F\x72\x70\x6D\x63\x6F\x6E\x66\x69\x67\x64\x69\x72\x7D\x2F\x63\x6D\x61\x6B\x65\x2E\x72\x65\x71\x0A\x25\x5F\x5F\x63\x6D\x61\x6B\x65\x5F\x70\x61\x74\x68\x09\x09\x5E\x28\x25\x7B\x5F\x6C\x69\x62\x64\x69\x72\x7D\x7C\x25\x7B\x5F\x64\x61\x74\x61\x64\x69\x72\x7D\x29\x2F\x63\x6D\x61\x6B\x65\x2F\x2E\x2A\x2F\x2E\x2A\x28\x43\x6F\x6E\x66\x69\x67\x5C\x2E\x63\x6D\x61\x6B\x65\x7C\x2D\x63\x6F\x6E\x66\x69\x67\x5C\x2E\x63\x6D\x61\x6B\x65\x29\x24\x0A' | dd seek=$((0x0)) conv=notrunc bs=1 of=usr/lib/rpm/fileattrs/cmake.attr
sleep 1
chmod 0644 usr/lib/rpm/fileattrs/cmake.attr
printf '\x23\x20\x2D\x2D\x2D\x2D\x20\x56\x50\x41\x54\x48\x20\x64\x65\x66\x61\x75\x6C\x74\x20\x73\x65\x74\x74\x69\x6E\x67\x73\x0A\x0A\x23\x20\x64\x69\x72\x65\x63\x74\x6F\x72\x79\x20\x77\x68\x65\x72\x65\x20\x43\x4D\x61\x6B\x65\x4C\x69\x73\x74\x73\x2E\x74\x78\x74\x2F\x6D\x65\x73\x6F\x6E\x2E\x62\x75\x69\x6C\x64\x2F\x65\x74\x63\x2E\x20\x61\x72\x65\x20\x70\x6C\x61\x63\x65\x64\x0A\x25\x5F\x76\x70\x61\x74\x68\x5F\x73\x72\x63\x64\x69\x72\x20\x2E\x0A\x0A\x23\x20\x64\x69\x72\x65\x63\x74\x6F\x72\x79\x20\x28\x64\x6F\x65\x73\x6E\x27\x74\x20\x6E\x65\x65\x64\x20\x74\x6F\x20\x65\x78\x69\x73\x74\x29\x20\x77\x68\x65\x72\x65\x20\x61\x6C\x6C\x20\x67\x65\x6E\x65\x72\x61\x74\x65\x64\x20\x62\x75\x69\x6C\x64\x20\x66\x69\x6C\x65\x73\x20\x77\x69\x6C\x6C\x20\x62\x65\x20\x70\x6C\x61\x63\x65\x64\x0A\x25\x5F\x76\x70\x61\x74\x68\x5F\x62\x75\x69\x6C\x64\x64\x69\x72\x20\x25\x5F\x74\x61\x72\x67\x65\x74\x5F\x70\x6C\x61\x74\x66\x6F\x72\x6D\x0A' | dd seek=$((0x0)) conv=notrunc bs=1 of=usr/lib/rpm/macros.d/macros.vpath
sleep 1
chmod 0644 usr/lib/rpm/macros.d/macros.vpath
sleep 1
sed "s|^%_cmake_version .*|%_cmake_version ${_cmake_ver}|g" -i usr/lib/rpm/macros.d/macros.cmake
_strip_and_zipman
ln -sf ccmake usr/bin/ccmake3
ln -sf cpack usr/bin/cpack3
ln -sf ctest usr/bin/ctest3
ln -sf cmake usr/bin/cmake3
sleep 1
touch -r usr/bin/cmake usr/lib/rpm/cmake.req
touch -r usr/bin/cmake usr/lib/rpm/cmake.prov
touch -r usr/bin/cmake usr/lib/rpm/fileattrs/cmake.attr
touch -r usr/bin/cmake usr/lib/rpm/macros.d/macros.cmake
touch -r usr/bin/cmake usr/lib/rpm/macros.d/macros.vpath

echo
sleep 2
tar -Jcvf /tmp/cmake-"${_cmake_ver}"-1.el7.x86_64.tar.xz *
echo
sleep 2

cd /tmp
rm -fr "${_tmp_dir}"
rm -fr /tmp/cmake
printf '\033[01;32m%s\033[m\n' '  build cmake done'
echo
exit

